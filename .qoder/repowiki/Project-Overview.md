# 📊 项目概述

## 🎯 项目背景

**CloudResourceOptimizer** 是一个专为云环境设计的智能资源管理工具。在云计算环境中，资源利用率的优化对于成本控制和性能管理至关重要。本项目通过动态调整系统资源使用情况，帮助用户达到最佳的资源利用率。

## 🏗️ 系统架构

```
┌─────────────────────────────────────────────────────────────┐
│                CloudResourceOptimizer 架构                  │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │   配置管理   │  │   日志管理   │  │   监控界面   │         │
│  │ ConfigMgr   │  │   Logger    │  │   Glances   │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐ │
│  │              系统监控模块 (SystemMonitor)                │ │
│  │  • 规格检测    • 实时监控    • 历史数据    • 阈值判断    │ │
│  └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐ │
│  │             冗余控制模块 (RedundancyController)          │ │
│  │                                                         │ │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐             │ │
│  │  │CPU压力测试│  │内存压力测试│  │磁盘压力测试│             │ │
│  │  │CPUStress │  │MemStress │  │DiskStress│             │ │
│  │  └──────────┘  └──────────┘  └──────────┘             │ │
│  └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                系统恢复模块 (Recovery)                   │ │
│  │  • 进程清理    • 资源释放    • 状态还原    • 验证检查    │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 📁 项目结构

```
Dynamic_Redundancy/
├── 📁 scripts/                    # 核心脚本目录
│   ├── 🐍 dynamic_redundancy.py    # 主控制程序
│   ├── 🐍 cpu_stresser.py          # CPU压力测试工具
│   ├── 🐍 memory_stresser.py       # 内存压力测试工具
│   ├── 🐍 disk_stresser.py         # 磁盘压力测试工具
│   └── 🐍 wiki_manager.py          # Wiki管理工具
├── 📁 Recover/                    # 系统恢复目录
│   ├── 🐍 recover_system.py        # Python恢复脚本
│   ├── 🦇 recover_system.bat       # Windows恢复脚本
│   └── 🐚 recover_system.sh        # Linux/macOS恢复脚本
├── 📁 config/                     # 配置文件目录
│   └── ⚙️ .env                     # 环境配置文件
├── 📁 logs/                       # 日志文件目录
│   └── 📋 .gitkeep                 # 保持目录结构
├── 📁 .qoder/repowiki/            # Wiki文档目录
│   ├── 📄 Home.md                  # 首页文档
│   ├── 📄 Usage-Guide.md           # 使用指南
│   ├── 📄 API-Documentation.md     # API文档
│   └── 📄 Configuration-Guide.md   # 配置指南
├── 📁 .github/workflows/          # GitHub Actions
│   ├── 🔄 sync-wiki.yml           # 自动同步workflow
│   └── 🔄 manual-wiki-sync.yml    # 手动同步workflow
├── 📄 README.md                   # 项目说明文档
├── 📄 requirements.txt            # Python依赖清单
├── 📄 .gitignore                  # Git忽略文件
├── 🦇 start_dynamic_redundancy.bat # Windows启动脚本
└── 🐚 start_dynamic_redundancy.sh  # Linux/macOS启动脚本
```

## 🔧 核心模块详解

### 1. 配置管理模块 (ConfigManager)
- **功能**: 负责读取和解析.env配置文件
- **特点**: 
  - 支持环境变量替换
  - 配置参数验证
  - 默认值处理
  - 实时配置重载

### 2. 系统监控模块 (SystemMonitor)
- **功能**: 实时监控系统资源使用情况
- **监控指标**:
  - CPU使用率（实时/平均）
  - 内存使用率（实时/平均）
  - 磁盘使用率（实时/平均）
  - 系统负载情况
- **特点**:
  - 历史数据维护（30天滚动）
  - 智能规格检测
  - 阈值告警机制

### 3. 冗余控制模块 (RedundancyController)
- **功能**: 根据目标利用率动态调整系统资源
- **控制策略**:
  - 小规格主机：25%平均利用率
  - 大规格主机：40%平均利用率
- **调整方式**:
  - CPU: 多线程计算密集型任务
  - 内存: 动态内存分配和占用
  - 磁盘: 临时文件创建和管理

### 4. 监控界面模块 (GlancesMonitor)
- **功能**: 提供Web界面的实时监控
- **特点**:
  - 实时数据更新
  - 多维度性能展示
  - 历史趋势图表
  - 移动端适配

### 5. 系统恢复模块 (Recovery)
- **功能**: 安全清理和还原系统状态
- **恢复内容**:
  - 停止所有压力测试进程
  - 清理临时文件和缓存
  - 释放占用的系统资源
  - 验证恢复结果

## 🎯 设计理念

### 1. 智能化
- 自动检测系统规格
- 动态调整控制策略
- 智能异常处理

### 2. 安全性
- 资源使用上限控制
- 进程安全管理
- 完整的恢复机制

### 3. 可维护性
- 模块化设计
- 详细的日志记录
- 配置化管理

### 4. 跨平台
- Windows/Linux/macOS支持
- 统一的接口设计
- 平台特定优化

## 📈 技术特性

### 高性能
- 多线程并发处理
- 内存高效管理
- 最小化系统开销

### 高可靠性
- 异常处理机制
- 自动恢复功能
- 状态持久化

### 高可用性
- 7×24小时运行
- 自动故障检测
- 快速故障恢复

### 高扩展性
- 插件化架构
- 配置化扩展
- API接口支持

## 🔮 发展路线图

### 短期目标 (1-3个月)
- [ ] 增加网络监控功能
- [ ] 优化资源调度算法
- [ ] 增加更多监控指标

### 中期目标 (3-6个月)
- [ ] 支持集群模式
- [ ] 添加Web管理界面
- [ ] 集成告警通知系统

### 长期目标 (6-12个月)
- [ ] 支持容器化部署
- [ ] 机器学习优化算法
- [ ] 云原生架构改造

---

> 🚀 **愿景**: 成为云环境中最智能、最可靠的资源优化管理工具。